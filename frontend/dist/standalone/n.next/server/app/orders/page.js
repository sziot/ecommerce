(()=>{var e={};e.id=569,e.ids=[569],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},2694:e=>{"use strict";e.exports=require("http2")},8791:e=>{"use strict";e.exports=require("https")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},9787:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>c.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>u,tree:()=>d}),t(5925),t(3324),t(5866);var r=t(3191),a=t(8716),l=t(7922),c=t.n(l),i=t(5231),n={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>i[e]);t.d(s,n);let d=["",{children:["orders",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,5925)),"/home/ubuntu/ecommerce/frontend/src/app/orders/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,3324)),"/home/ubuntu/ecommerce/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],o=["/home/ubuntu/ecommerce/frontend/src/app/orders/page.tsx"],x="/orders/page",m={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/orders/page",pathname:"/orders",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},4611:(e,s,t)=>{Promise.resolve().then(t.bind(t,1859))},4659:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(6557).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},2714:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(6557).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},4228:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(6557).Z)("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]])},1859:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>b});var r=t(326),a=t(7577),l=t(5047),c=t(6557);let i=(0,c.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);var n=t(4659),d=t(4228);let o=(0,c.Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var x=t(2714),m=t(1664),u=t(9752),p=t(4256),h=t(4055),j=t(988),g=t(8029),f=t(1086),y=t(4004),N=t(8069);let v={pending:{color:"bg-orange-100 text-orange-700",icon:r.jsx(i,{className:"w-4 h-4"}),text:"待支付"},paid:{color:"bg-blue-100 text-blue-700",icon:r.jsx(n.Z,{className:"w-4 h-4"}),text:"已支付"},shipped:{color:"bg-cyan-100 text-cyan-700",icon:r.jsx(d.Z,{className:"w-4 h-4"}),text:"已发货"},completed:{color:"bg-green-100 text-green-700",icon:r.jsx(n.Z,{className:"w-4 h-4"}),text:"已完成"},cancelled:{color:"bg-red-100 text-red-700",icon:r.jsx(o,{className:"w-4 h-4"}),text:"已取消"}};function b(){let e=(0,l.useRouter)(),{isAuthenticated:s}=(0,g.t)(),[t,c]=(0,a.useState)(null),[i,n]=(0,a.useState)(!1),{data:d,loading:o}=(0,f.QT)("/orders/",{immediate:s}),b=async e=>{try{await N.Z.post(`/orders/${e}/cancel/`),y.A.success("订单已取消"),window.location.reload()}catch(e){y.A.error("取消失败")}},w=e=>{c(e),n(!0)};return s?o?r.jsx(h.h,{}):(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[r.jsx("h1",{className:"text-2xl font-bold mb-6",children:"我的订单"}),null===d?r.jsx(h.h,{}):0===d.length?r.jsx(u.Zb,{children:r.jsx(u.aY,{className:"p-12",children:r.jsx(j.u,{title:"暂无订单",description:"您还没有订单"})})}):r.jsx("div",{className:"space-y-4",children:d.map(s=>{let t=v[s.status];return r.jsx(u.Zb,{children:(0,r.jsxs)(u.aY,{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["订单号：",s.order_no]}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["下单时间：",new Date(s.created_at).toLocaleString("zh-CN")]})]}),(0,r.jsxs)("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded text-xs ${t.color}`,children:[t.icon,t.text]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:s.items.slice(0,3).map(e=>(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("img",{src:e.product_image||"/placeholder-product.jpg",alt:e.product_name,className:"w-16 h-16 object-cover rounded"}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm truncate",children:e.product_name}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:["\xa5",e.price," x ",e.quantity]})]})]},e.id))}),(0,r.jsxs)("div",{className:"flex justify-between items-center border-t pt-4 flex-wrap gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:["共 ",s.items.reduce((e,s)=>e+s.quantity,0)," 件商品"]}),(0,r.jsxs)("span",{className:"text-sm",children:["实付：",(0,r.jsxs)("span",{className:"text-red-500 font-semibold text-lg",children:["\xa5",s.actual_amount]})]})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:["pending"===s.status&&r.jsx(m.z,{variant:"primary",size:"sm",onClick:()=>e.push(`/payment?order_id=${s.id}`),children:"去支付"}),(0,r.jsxs)(m.z,{variant:"default",size:"sm",onClick:()=>w(s),children:[r.jsx(x.Z,{className:"w-4 h-4 mr-1"}),"查看详情"]}),"pending"===s.status&&r.jsx(m.z,{variant:"danger",size:"sm",onClick:()=>b(s.id),children:"取消订单"})]})]})]})},s.id)})}),r.jsx(p.u,{isOpen:i,onClose:()=>n(!1),title:"订单详情",size:"lg",children:t&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-500",children:"订单号："}),r.jsx("span",{children:t.order_no})]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-500",children:"订单状态："}),r.jsx("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded text-xs ${v[t.status].color}`,children:v[t.status].text})]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-500",children:"下单时间："}),r.jsx("span",{children:new Date(t.created_at).toLocaleString("zh-CN")})]}),t.address&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"col-span-2",children:[r.jsx("span",{className:"text-gray-500",children:"收货人："}),(0,r.jsxs)("span",{children:[t.address.receiver_name," ",t.address.receiver_phone]})]}),(0,r.jsxs)("div",{className:"col-span-2",children:[r.jsx("span",{className:"text-gray-500",children:"收货地址："}),(0,r.jsxs)("span",{children:[t.address.province," ",t.address.city," ",t.address.district," ",t.address.detail]})]})]})]}),(0,r.jsxs)("div",{className:"border-t pt-4",children:[r.jsx("h3",{className:"font-semibold mb-3",children:"费用明细"}),(0,r.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"商品总额："}),(0,r.jsxs)("span",{children:["\xa5",t.total_amount]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"优惠："}),(0,r.jsxs)("span",{className:"text-red-500",children:["-\xa5",t.discount_amount]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"运费："}),(0,r.jsxs)("span",{children:["\xa5",t.shipping_fee]})]}),(0,r.jsxs)("div",{className:"flex justify-between text-lg font-semibold",children:[r.jsx("span",{children:"实付金额："}),(0,r.jsxs)("span",{className:"text-red-500",children:["\xa5",t.actual_amount]})]})]})]}),(0,r.jsxs)("div",{className:"border-t pt-4",children:[r.jsx("h3",{className:"font-semibold mb-3",children:"商品清单"}),r.jsx("div",{className:"space-y-3",children:t.items.map(e=>(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx("img",{src:e.product_image||"/placeholder-product.jpg",alt:e.product_name,className:"w-16 h-16 object-cover rounded"}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium",children:e.product_name}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["\xa5",e.price," x ",e.quantity]})]}),(0,r.jsxs)("span",{className:"font-semibold",children:["\xa5",e.subtotal]})]},e.id))})]})]})})]}):null}},9752:(e,s,t)=>{"use strict";t.d(s,{Ol:()=>i,Zb:()=>c,aY:()=>d,ll:()=>n});var r=t(326),a=t(7577),l=t(1867);let c=(0,a.forwardRef)(({className:e,...s},t)=>r.jsx("div",{ref:t,className:(0,l.cn)("rounded-lg border border-gray-200 bg-white shadow-sm",e),...s}));c.displayName="Card";let i=(0,a.forwardRef)(({className:e,...s},t)=>r.jsx("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",e),...s}));i.displayName="CardHeader";let n=(0,a.forwardRef)(({className:e,...s},t)=>r.jsx("h3",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));n.displayName="CardTitle";let d=(0,a.forwardRef)(({className:e,...s},t)=>r.jsx("div",{ref:t,className:(0,l.cn)("p-6 pt-0",e),...s}));d.displayName="CardContent"},988:(e,s,t)=>{"use strict";t.d(s,{u:()=>l});var r=t(326),a=t(8705);function l({icon:e=r.jsx(a.Z,{className:"w-12 h-12"}),title:s="暂无数据",description:t,action:l}){return(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 px-4",children:[r.jsx("div",{className:"text-gray-300 mb-4",children:e}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:s}),t&&r.jsx("p",{className:"text-sm text-gray-500 mb-4",children:t}),l]})}},4055:(e,s,t)=>{"use strict";t.d(s,{h:()=>l});var r=t(326);function a({size:e="md"}){return r.jsx("div",{className:"flex items-center justify-center",children:r.jsx("div",{className:`border-4 border-gray-200 border-t-blue-600 rounded-full animate-spin ${{sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"}[e]}`})})}function l(){return r.jsx("div",{className:"flex items-center justify-center min-h-[50vh]",children:r.jsx(a,{size:"lg"})})}},4256:(e,s,t)=>{"use strict";t.d(s,{u:()=>n});var r=t(326),a=t(7577),l=t(4019),c=t(1867);let i={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};function n({isOpen:e,onClose:s,title:t,children:n,size:d="md",showCloseButton:o=!0}){let x=(0,a.useRef)(null);return e?(0,r.jsxs)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:s}),r.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:(0,r.jsxs)("div",{ref:x,className:(0,c.cn)("relative bg-white rounded-lg shadow-xl w-full",i[d]),onClick:e=>e.stopPropagation(),children:[(t||o)&&(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[t&&r.jsx("h3",{className:"text-lg font-semibold",children:t}),o&&r.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(l.Z,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"p-6",children:n})]})})]}):null}},1086:(e,s,t)=>{"use strict";t.d(s,{ym:()=>c,iB:()=>i,QT:()=>l});var r=t(7577),a=t(8069);function l(e,s={}){let{immediate:t=!0,onSuccess:l,onError:c}=s,[i,n]=(0,r.useState)(null),[d,o]=(0,r.useState)(!1),[x,m]=(0,r.useState)(null),u=(0,r.useRef)(l),p=(0,r.useRef)(c),h=(0,r.useCallback)(async()=>{console.log("[useRequest] execute called for URL:",e),o(!0),m(null);try{let s=await a.Z.get(e);console.log("[useRequest] Got response:",s.data),n(s.data),console.log("[useRequest] Data set successfully"),u.current?.(s.data)}catch(e){console.error("[useRequest] Error:",e),m(e),p.current?.(e)}finally{console.log("[useRequest] Setting loading to false"),o(!1)}},[e]);return{data:i,loading:d,error:x,execute:h,refetch:h}}function c(){return l("/products/featured/")}function i(e){return l(`/products/${e}/`)}t(8029),t(3296)},5925:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(8570).createProxy)(String.raw`/home/ubuntu/ecommerce/frontend/src/app/orders/page.tsx#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[120,252],()=>t(9787));module.exports=r})();