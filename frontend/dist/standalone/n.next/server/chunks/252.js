exports.id=252,exports.ids=[252],exports.modules={5721:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},8991:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,9404,23)),Promise.resolve().then(s.bind(s,6732)),Promise.resolve().then(s.bind(s,2371))},6732:(e,t,s)=>{"use strict";s.d(t,{default:()=>P});var r=s(326),a=s(434),l=s(5047),n=s(8705),i=s(2915),c=s(7671),o=s(9635),d=s(1810),h=s(1664),m=s(7577),x=s(1867);let u={sm:"min-w-[1.25rem] h-5 text-xs px-1",md:"min-w-[1.5rem] h-6 text-sm px-1.5",lg:"min-w-[1.75rem] h-7 text-base px-2"},f={red:"bg-red-500",blue:"bg-blue-500",green:"bg-green-500"},p=(0,m.forwardRef)(({className:e,count:t=0,showZero:s=!1,size:a="md",color:l="red",children:n,...i},c)=>(0,r.jsxs)("div",{ref:c,className:"relative inline-flex items-center",...i,children:[n,(s||t>0)&&r.jsx("span",{className:(0,x.cn)("absolute -top-2 -right-2 flex items-center justify-center","rounded-full text-white font-bold","transform scale-100",u[a],f[l],e),children:t>99?"99+":t})]}));p.displayName="Badge";let g=(0,m.createContext)(void 0);function v(){let e=(0,m.useContext)(g);if(!e)throw Error("Dropdown components must be used within Dropdown");return e}function j({children:e}){let[t,s]=(0,m.useState)(!1);return r.jsx(g.Provider,{value:{isOpen:t,setIsOpen:s,toggle:()=>s(e=>!e)},children:r.jsx("div",{className:"relative inline-block text-left",children:e})})}function b({asChild:e=!1,className:t,children:s,...a}){let{isOpen:l,toggle:n}=v();return e?r.jsx("div",{onClick:n,children:s}):r.jsx("button",{onClick:n,className:(0,x.cn)("inline-flex items-center justify-center",t),...a,children:s})}function y({className:e,children:t,align:s="end",...a}){let{isOpen:l,setIsOpen:n}=v(),i=(0,m.useRef)(null);return l?r.jsx("div",{ref:i,className:(0,x.cn)("absolute z-50 mt-2 w-56 rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none","end"===s?"right-0":"left-0",e),...a,children:r.jsx("div",{className:"py-1",children:t})}):null}function N({className:e,children:t,onClick:s,asChild:a=!1,...l}){let{setIsOpen:n}=v(),i=()=>{s?.(),n(!1)},c=(0,x.cn)("block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer",e);return a?(0,m.cloneElement)(t,{className:(0,x.cn)(c,t.props.className),onClick:i,...l}):r.jsx("div",{onClick:i,className:c,...l,children:t})}function w({className:e}){return r.jsx("div",{className:(0,x.cn)("border-t border-gray-100 my-1",e)})}var k=s(640),C=s(8029),Z=s(3296);function P(){let e=(0,l.useRouter)(),{user:t,isAuthenticated:s,logout:m}=(0,C.t)(),{totalItems:x}=(0,Z.x)(),u=t=>{t&&e.push(`/products?search=${t}`)};return r.jsx("header",{className:"bg-white shadow-md sticky top-0 z-50",children:(0,r.jsxs)("div",{className:"container mx-auto px-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between py-4",children:[(0,r.jsxs)(a.default,{href:"/",className:"flex items-center space-x-2",children:[r.jsx(n.Z,{className:"w-8 h-8 text-blue-600"}),r.jsx("span",{className:"text-xl font-bold",children:"电商平台"})]}),r.jsx("div",{className:"flex-1 max-w-xl mx-8 hidden md:block",children:r.jsx(k.M,{placeholder:"搜索商品",onSearch:u,className:"w-full"})}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)(a.default,{href:"/products",className:"flex items-center gap-1 hover:text-blue-600",children:[r.jsx(i.Z,{className:"w-5 h-5"}),r.jsx("span",{className:"hidden sm:inline",children:"全部商品"})]}),(0,r.jsxs)(a.default,{href:"/cart",className:"flex items-center gap-1 hover:text-blue-600",children:[r.jsx(p,{count:x,size:"sm",children:r.jsx(c.Z,{className:"w-5 h-5"})}),r.jsx("span",{className:"ml-1 hidden sm:inline",children:"购物车"})]}),s?(0,r.jsxs)(j,{children:[r.jsx(b,{asChild:!0,children:(0,r.jsxs)(h.z,{variant:"ghost",className:"flex items-center gap-1",children:[r.jsx(o.Z,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden sm:inline",children:t?.nickname||t?.username})]})}),(0,r.jsxs)(y,{align:"end",children:[r.jsx(N,{asChild:!0,children:r.jsx(a.default,{href:"/profile",children:"个人中心"})}),r.jsx(N,{asChild:!0,children:r.jsx(a.default,{href:"/orders",children:"我的订单"})}),r.jsx(w,{}),(0,r.jsxs)(N,{onClick:()=>{m(),e.push("/")},children:[r.jsx(d.Z,{className:"w-4 h-4 mr-2 inline"}),"退出登录"]})]})]}):(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(a.default,{href:"/login",children:r.jsx(h.z,{variant:"default",children:"登录"})}),r.jsx(a.default,{href:"/register",children:r.jsx(h.z,{variant:"primary",children:"注册"})})]})]})]}),r.jsx("div",{className:"pb-4 md:hidden",children:r.jsx(k.M,{placeholder:"搜索商品",onSearch:u})})]})})}},2371:(e,t,s)=>{"use strict";s.d(t,{default:()=>a});var r=s(326);function a({children:e}){return r.jsx(r.Fragment,{children:e})}},1664:(e,t,s)=>{"use strict";s.d(t,{z:()=>c});var r=s(326),a=s(7577),l=s(1867);let n={default:"bg-gray-200 text-gray-900 hover:bg-gray-300",primary:"bg-blue-600 text-white hover:bg-blue-700",ghost:"bg-transparent hover:bg-gray-100 text-gray-900",link:"bg-transparent text-blue-600 hover:underline p-0",danger:"bg-red-600 text-white hover:bg-red-700"},i={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"},c=(0,a.forwardRef)(({className:e,variant:t="default",size:s="md",fullWidth:a=!1,disabled:c,...o},d)=>r.jsx("button",{ref:d,disabled:c,className:(0,l.cn)("inline-flex items-center justify-center rounded-md font-medium transition-colors","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500","disabled:pointer-events-none disabled:opacity-50",n[t],i[s],a&&"w-full",e),...o}));c.displayName="Button"},1190:(e,t,s)=>{"use strict";s.d(t,{I:()=>n});var r=s(326),a=s(7577),l=s(1867);let n=(0,a.forwardRef)(({className:e,type:t,error:s,label:a,id:n,...i},c)=>{let o=n||a?.toLowerCase().replace(/\s+/g,"-");return(0,r.jsxs)("div",{className:"w-full",children:[a&&r.jsx("label",{htmlFor:o,className:"block text-sm font-medium text-gray-700 mb-1",children:a}),r.jsx("input",{id:o,type:t,className:(0,l.cn)("flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2","text-sm placeholder:text-gray-400","focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","disabled:cursor-not-allowed disabled:opacity-50",s&&"border-red-500 focus:ring-red-500",e),ref:c,...i}),s&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:s})]})});n.displayName="Input"},640:(e,t,s)=>{"use strict";s.d(t,{M:()=>d});var r=s(326),a=s(7577),l=s(8307),n=s(4019),i=s(1190),c=s(1664),o=s(1867);function d({placeholder:e="搜索...",onSearch:t,className:s}){let[d,h]=(0,a.useState)(""),m=()=>{t(d)};return(0,r.jsxs)("div",{className:(0,o.cn)("relative flex items-center w-full",s),children:[(0,r.jsxs)("div",{className:"relative flex-1",children:[r.jsx(l.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"}),r.jsx(i.I,{type:"text",value:d,onChange:e=>h(e.target.value),onKeyDown:e=>{"Enter"===e.key&&m()},placeholder:e,className:"pl-10 pr-10"}),d&&r.jsx("button",{type:"button",onClick:()=>{h(""),t("")},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:r.jsx(n.Z,{className:"h-4 w-4"})})]}),r.jsx(c.z,{type:"button",variant:"primary",onClick:m,className:"ml-2",children:"搜索"})]})}},8069:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var r=s(4464);s(4004);let a=r.Z.create({timeout:1e4,headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>{let t="http://106.75.44.210:8000/api/v1";return t||(t="http://localhost:8000/api/v1"),e.baseURL=t,e},e=>Promise.reject(e)),a.interceptors.response.use(e=>e,async e=>{let t=e.config;return e.response?.status!==401||t._retry,e.response?.data?.detail||e.message,Promise.reject(e)});let l=a},1867:(e,t,s)=>{"use strict";s.d(t,{cn:()=>l});var r=s(1135),a=s(1009);function l(...e){return(0,a.m6)((0,r.W)(e))}},4004:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});let r=null;function a(e,t,s={}){let a=(r||((r=document.createElement("div")).id="toast-container",r.className="fixed top-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none",document.body.appendChild(r)),r),l=document.createElement("div");l.className=`${({success:"bg-green-500",error:"bg-red-500",info:"bg-blue-500",warning:"bg-yellow-500"})[e]} text-white px-6 py-3 rounded-lg shadow-lg pointer-events-auto transform transition-all duration-300 translate-x-full opacity-0`,l.textContent=t,a.appendChild(l),requestAnimationFrame(()=>{l.classList.remove("translate-x-full","opacity-0")});let n=setTimeout(()=>{l.classList.add("translate-x-full","opacity-0"),setTimeout(()=>{l.remove(),s.onClose?.(),0===a.children.length&&(a.remove(),r=null)},300)},s.duration??3e3);l.addEventListener("click",()=>{clearTimeout(n),l.classList.add("translate-x-full","opacity-0"),setTimeout(()=>{l.remove(),s.onClose?.(),0===a.children.length&&(a.remove(),r=null)},300)})}let l={success:(e,t)=>a("success",e,t),error:(e,t)=>a("error",e,t),info:(e,t)=>a("info",e,t),warning:(e,t)=>a("warning",e,t)}},8029:(e,t,s)=>{"use strict";s.d(t,{t:()=>n});var r=s(551),a=s(5251),l=s(8069);let n=(0,r.Ue)()((0,a.tJ)((e,t)=>({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1,setAuth:(t,s,r)=>{localStorage.setItem("access_token",s),localStorage.setItem("refresh_token",r),e({user:t,accessToken:s,refreshToken:r,isAuthenticated:!0})},login:async(e,s)=>{let{access:r,refresh:a,user:n}=(await l.Z.post("/auth/login/",{username:e,password:s})).data;t().setAuth(n,r,a)},register:async e=>{await l.Z.post("/auth/register/",e)},logout:()=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),e({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1})},updateUser:t=>{e({user:t})},clearAuth:()=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),e({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1})}}),{name:"auth-storage",partialize:e=>({accessToken:e.accessToken,refreshToken:e.refreshToken,user:e.user,isAuthenticated:e.isAuthenticated})}))},3296:(e,t,s)=>{"use strict";s.d(t,{x:()=>n});var r=s(551),a=s(5251),l=s(8069);let n=(0,r.Ue)()((0,a.tJ)((e,t)=>({items:[],totalItems:0,totalAmount:0,isLoading:!1,fetchCart:async()=>{e({isLoading:!0});try{let{items:t,total_items:s,total_amount:r}=(await l.Z.get("/cart/")).data;e({items:t,totalItems:s,totalAmount:r,isLoading:!1})}catch(t){throw e({isLoading:!1}),t}},setCart:(t,s,r)=>{e({items:t,totalItems:s,totalAmount:r})},addToCart:async(e,s=1)=>{await l.Z.post("/cart/items/",{product_id:e,quantity:s}),t().fetchCart()},updateCartItem:async(e,s)=>{await l.Z.patch(`/cart/items/${e}/`,{quantity:s}),t().fetchCart()},removeFromCart:async e=>{await l.Z.delete(`/cart/items/${e}/`),t().fetchCart()},clearCart:async()=>{await l.Z.delete("/cart/clear/"),e({items:[],totalItems:0,totalAmount:0})}}),{name:"cart-storage"}))},3324:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f,metadata:()=>u});var r=s(9510),a=s(5317),l=s.n(a);s(5023);var n=s(8570);let i=(0,n.createProxy)(String.raw`/home/ubuntu/ecommerce/frontend/src/components/layout/Providers.tsx#default`),c=(0,n.createProxy)(String.raw`/home/ubuntu/ecommerce/frontend/src/components/layout/Header.tsx#default`);var o=s(7371),d=s(2528),h=s(429),m=s(2749);function x(){return r.jsx("footer",{className:"bg-gray-800 text-white mt-auto",children:(0,r.jsxs)("div",{className:"container mx-auto px-4 py-12",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[(0,r.jsxs)("div",{children:[r.jsx("h5",{className:"text-lg font-semibold mb-4",children:"关于我们"}),r.jsx("p",{className:"text-gray-400",children:"我们致力于为用户提供优质的购物体验，精选商品，优质服务。"}),(0,r.jsxs)("div",{className:"flex gap-4 mt-4",children:[r.jsx(d.Z,{className:"w-5 h-5 hover:text-blue-400 cursor-pointer"}),r.jsx(h.Z,{className:"w-5 h-5 hover:text-blue-400 cursor-pointer"}),r.jsx(m.Z,{className:"w-5 h-5 hover:text-blue-400 cursor-pointer"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("h5",{className:"text-lg font-semibold mb-4",children:"快速链接"}),(0,r.jsxs)("div",{className:"flex flex-col space-y-2",children:[r.jsx(o.default,{href:"/products",className:"text-gray-400 hover:text-white",children:"全部商品"}),r.jsx(o.default,{href:"/cart",className:"text-gray-400 hover:text-white",children:"购物车"}),r.jsx(o.default,{href:"/orders",className:"text-gray-400 hover:text-white",children:"我的订单"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("h5",{className:"text-lg font-semibold mb-4",children:"客户服务"}),(0,r.jsxs)("div",{className:"flex flex-col space-y-2",children:[r.jsx(o.default,{href:"#",className:"text-gray-400 hover:text-white",children:"帮助中心"}),r.jsx(o.default,{href:"#",className:"text-gray-400 hover:text-white",children:"退换货政策"}),r.jsx(o.default,{href:"#",className:"text-gray-400 hover:text-white",children:"配送说明"}),r.jsx(o.default,{href:"#",className:"text-gray-400 hover:text-white",children:"联系我们"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("h5",{className:"text-lg font-semibold mb-4",children:"联系我们"}),(0,r.jsxs)("div",{className:"text-gray-400 space-y-2",children:[r.jsx("p",{children:"电话: 400-123-4567"}),r.jsx("p",{children:"邮箱: service@ecommerce.com"}),r.jsx("p",{children:"工作时间: 周一至周日 9:00-21:00"})]})]})]}),r.jsx("div",{className:"border-t border-gray-700 mt-8 pt-8 text-center text-gray-400",children:r.jsx("p",{children:"\xa9 2024 电商平台. All rights reserved."})})]})})}let u={title:"电商平台 - 首页",description:"B2C电商平台MVP版本"};function f({children:e}){return r.jsx("html",{lang:"zh-CN",children:r.jsx("body",{className:l().className,children:r.jsx(i,{children:(0,r.jsxs)("div",{className:"min-h-screen flex flex-col",children:[r.jsx(c,{}),r.jsx("main",{className:"flex-1",children:e}),r.jsx(x,{})]})})})})}},5023:()=>{}};