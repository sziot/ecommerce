"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[61],{2381:function(e,t,r){r.d(t,{z:function(){return c}});var n=r(7437),a=r(2265),o=r(1001);let l={default:"bg-gray-200 text-gray-900 hover:bg-gray-300",primary:"bg-blue-600 text-white hover:bg-blue-700",ghost:"bg-transparent hover:bg-gray-100 text-gray-900",link:"bg-transparent text-blue-600 hover:underline p-0",danger:"bg-red-600 text-white hover:bg-red-700"},s={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"},c=(0,a.forwardRef)((e,t)=>{let{className:r,variant:a="default",size:c="md",fullWidth:i=!1,disabled:u,...d}=e;return(0,n.jsx)("button",{ref:t,disabled:u,className:(0,o.cn)("inline-flex items-center justify-center rounded-md font-medium transition-colors","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500","disabled:pointer-events-none disabled:opacity-50",l[a],s[c],i&&"w-full",r),...d})});c.displayName="Button"},9820:function(e,t,r){r.d(t,{Ol:function(){return s},Zb:function(){return l},aY:function(){return i},ll:function(){return c}});var n=r(7437),a=r(2265),o=r(1001);let l=(0,a.forwardRef)((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,o.cn)("rounded-lg border border-gray-200 bg-white shadow-sm",r),...a})});l.displayName="Card";let s=(0,a.forwardRef)((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",r),...a})});s.displayName="CardHeader";let c=(0,a.forwardRef)((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("h3",{ref:t,className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});c.displayName="CardTitle";let i=(0,a.forwardRef)((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,o.cn)("p-6 pt-0",r),...a})});i.displayName="CardContent"},4761:function(e,t,r){r.d(t,{h:function(){return o}});var n=r(7437);function a(e){let{size:t="md"}=e;return(0,n.jsx)("div",{className:"flex items-center justify-center",children:(0,n.jsx)("div",{className:"border-4 border-gray-200 border-t-blue-600 rounded-full animate-spin ".concat({sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"}[t])})})}function o(){return(0,n.jsx)("div",{className:"flex items-center justify-center min-h-[50vh]",children:(0,n.jsx)(a,{size:"lg"})})}},1837:function(e,t,r){var n=r(3464),a=r(8249),o=r(8571);let l=n.Z.create({timeout:1e4,headers:{"Content-Type":"application/json"}});l.interceptors.request.use(e=>{let t="http://106.75.44.210:8000/api/v1";if(!t){let e=window.location.hostname;t="localhost"===e||"127.0.0.1"===e||e.includes("192.168.")||e.includes("10.")||e.includes("172.")?"http://localhost:8000/api/v1":o.env.NEXT_PUBLIC_PROD_API_URL||"/api/v1"}e.baseURL=t;{let t=localStorage.getItem("access_token");t&&(e.headers.Authorization="Bearer ".concat(t))}return e},e=>Promise.reject(e)),l.interceptors.response.use(e=>e,async e=>{var t,r,o;let s=e.config;if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&!s._retry){s._retry=!0;try{let e=localStorage.getItem("refresh_token");if(e){let{access:t}=(await n.Z.post("".concat(s.baseURL,"/auth/refresh/"),{refresh:e})).data;return localStorage.setItem("access_token",t),s.headers.Authorization="Bearer ".concat(t),l(s)}}catch(e){return localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.href="/login",Promise.reject(e)}}let c=(null===(o=e.response)||void 0===o?void 0:null===(r=o.data)||void 0===r?void 0:r.detail)||e.message||"请求失败";return a.A.error(c),Promise.reject(e)}),t.Z=l},6606:function(e,t,r){r.d(t,{ym:function(){return l},iB:function(){return s},QT:function(){return o}});var n=r(2265),a=r(1837);function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{immediate:r=!0,onSuccess:o,onError:l}=t,[s,c]=(0,n.useState)(null),[i,u]=(0,n.useState)(!1),[d,f]=(0,n.useState)(null),m=(0,n.useRef)(o),g=(0,n.useRef)(l);(0,n.useEffect)(()=>{m.current=o,g.current=l});let h=(0,n.useCallback)(async()=>{var t,r;console.log("[useRequest] execute called for URL:",e),u(!0),f(null);try{let r=await a.Z.get(e);console.log("[useRequest] Got response:",r.data),c(r.data),console.log("[useRequest] Data set successfully"),null===(t=m.current)||void 0===t||t.call(m,r.data)}catch(e){console.error("[useRequest] Error:",e),f(e),null===(r=g.current)||void 0===r||r.call(g,e)}finally{console.log("[useRequest] Setting loading to false"),u(!1)}},[e]);return(0,n.useEffect)(()=>{r&&h()},[h,r]),{data:s,loading:i,error:d,execute:h,refetch:h}}function l(){return o("/products/featured/")}function s(e){return o("/products/".concat(e,"/"))}r(1217),r(7949)},1001:function(e,t,r){r.d(t,{cn:function(){return o}});var n=r(1994),a=r(3335);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,n.W)(t))}},8249:function(e,t,r){r.d(t,{A:function(){return o}});let n=null;function a(e,t){var r;let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=(n||((n=document.createElement("div")).id="toast-container",n.className="fixed top-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none",document.body.appendChild(n)),n),l=document.createElement("div");l.className="".concat({success:"bg-green-500",error:"bg-red-500",info:"bg-blue-500",warning:"bg-yellow-500"}[e]," text-white px-6 py-3 rounded-lg shadow-lg pointer-events-auto transform transition-all duration-300 translate-x-full opacity-0"),l.textContent=t,o.appendChild(l),requestAnimationFrame(()=>{l.classList.remove("translate-x-full","opacity-0")});let s=setTimeout(()=>{l.classList.add("translate-x-full","opacity-0"),setTimeout(()=>{var e;l.remove(),null===(e=a.onClose)||void 0===e||e.call(a),0===o.children.length&&(o.remove(),n=null)},300)},null!==(r=a.duration)&&void 0!==r?r:3e3);l.addEventListener("click",()=>{clearTimeout(s),l.classList.add("translate-x-full","opacity-0"),setTimeout(()=>{var e;l.remove(),null===(e=a.onClose)||void 0===e||e.call(a),0===o.children.length&&(o.remove(),n=null)},300)})}let o={success:(e,t)=>a("success",e,t),error:(e,t)=>a("error",e,t),info:(e,t)=>a("info",e,t),warning:(e,t)=>a("warning",e,t)}},1217:function(e,t,r){r.d(t,{t:function(){return l}});var n=r(9625),a=r(6885),o=r(1837);let l=(0,n.Ue)()((0,a.tJ)((e,t)=>({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1,setAuth:(t,r,n)=>{localStorage.setItem("access_token",r),localStorage.setItem("refresh_token",n),e({user:t,accessToken:r,refreshToken:n,isAuthenticated:!0})},login:async(e,r)=>{let{access:n,refresh:a,user:l}=(await o.Z.post("/auth/login/",{username:e,password:r})).data;t().setAuth(l,n,a)},register:async e=>{await o.Z.post("/auth/register/",e)},logout:()=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),e({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1})},updateUser:t=>{e({user:t})},clearAuth:()=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),e({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1})}}),{name:"auth-storage",partialize:e=>({accessToken:e.accessToken,refreshToken:e.refreshToken,user:e.user,isAuthenticated:e.isAuthenticated})}))},7949:function(e,t,r){r.d(t,{x:function(){return l}});var n=r(9625),a=r(6885),o=r(1837);let l=(0,n.Ue)()((0,a.tJ)((e,t)=>({items:[],totalItems:0,totalAmount:0,isLoading:!1,fetchCart:async()=>{e({isLoading:!0});try{let{items:t,total_items:r,total_amount:n}=(await o.Z.get("/cart/")).data;e({items:t,totalItems:r,totalAmount:n,isLoading:!1})}catch(t){throw e({isLoading:!1}),t}},setCart:(t,r,n)=>{e({items:t,totalItems:r,totalAmount:n})},addToCart:async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;await o.Z.post("/cart/items/",{product_id:e,quantity:r}),t().fetchCart()},updateCartItem:async(e,r)=>{await o.Z.patch("/cart/items/".concat(e,"/"),{quantity:r}),t().fetchCart()},removeFromCart:async e=>{await o.Z.delete("/cart/items/".concat(e,"/")),t().fetchCart()},clearCart:async()=>{await o.Z.delete("/cart/clear/"),e({items:[],totalItems:0,totalAmount:0})}}),{name:"cart-storage"}))}}]);