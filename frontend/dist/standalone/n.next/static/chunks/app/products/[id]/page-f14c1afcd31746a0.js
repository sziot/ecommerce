(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[351],{2274:function(e,s,a){Promise.resolve().then(a.bind(a,2698))},1047:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});let r=(0,a(9763).Z)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])},9397:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});let r=(0,a(9763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},6275:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});let r=(0,a(9763).Z)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},9376:function(e,s,a){"use strict";var r=a(5475);a.o(r,"useParams")&&a.d(s,{useParams:function(){return r.useParams}}),a.o(r,"useRouter")&&a.d(s,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(s,{useSearchParams:function(){return r.useSearchParams}})},2698:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return p}});var r=a(7437),t=a(2265),n=a(9376),c=a(1047),i=a(9397),l=a(6275),d=a(2381),o=a(9820),m=a(4761),u=a(6606),h=a(7949),x=a(8249);function p(){var e;let s=(0,n.useParams)().id,{addToCart:a}=(0,h.x)(),[p,j]=(0,t.useState)(1),[g,f]=(0,t.useState)(0),{data:N,loading:b}=(0,u.iB)(s);if(b)return(0,r.jsx)(m.h,{});if(!N)return(0,r.jsx)("div",{className:"container mx-auto px-4 py-12",children:(0,r.jsx)("p",{className:"text-center text-gray-500",children:"商品不存在"})});let v=N.main_image?[{image:N.main_image}]:[],y=async()=>{try{await a(N.id,p),x.A.success("已加入购物车")}catch(e){x.A.error("加入购物车失败")}};return(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,r.jsx)("div",{children:(0,r.jsxs)(o.Zb,{children:[(0,r.jsx)("img",{src:(null===(e=v[g])||void 0===e?void 0:e.image)||N.main_image||"/placeholder-product.jpg",alt:N.name,className:"w-full rounded-t-lg"}),v.length>1&&(0,r.jsx)("div",{className:"p-4 grid grid-cols-5 gap-2",children:v.map((e,s)=>(0,r.jsx)("div",{className:"cursor-pointer border-2 rounded ".concat(s===g?"border-blue-500":"border-transparent"),onClick:()=>f(s),children:(0,r.jsx)("img",{src:e.image,alt:"".concat(N.name," ").concat(s+1),className:"w-full h-20 object-cover rounded"})},s))})]})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-2",children:N.name}),(0,r.jsx)("p",{className:"text-gray-500 mb-4",children:N.category_name||""}),(0,r.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("span",{className:"text-3xl text-red-500 font-semibold",children:["\xa5",N.price]}),N.original_price&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("span",{className:"text-gray-400 line-through text-xl",children:["\xa5",N.original_price]}),(0,r.jsxs)("span",{className:"bg-red-500 text-white px-2 py-1 rounded text-sm",children:[N.discount_percent,"% OFF"]})]})]})}),(0,r.jsxs)("div",{className:"space-y-2 mb-6",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"font-semibold",children:"库存："}),(0,r.jsx)("span",{className:N.stock>0?"text-green-600":"text-red-600",children:N.stock>0?"".concat(N.stock," 件"):"缺货"})]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"font-semibold",children:"销量："}),(0,r.jsxs)("span",{children:[N.sales," 件"]})]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("p",{className:"font-semibold mb-2",children:"数量："}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(d.z,{variant:"default",size:"sm",onClick:()=>j(Math.max(1,p-1)),disabled:p<=1,children:(0,r.jsx)(c.Z,{className:"w-4 h-4"})}),(0,r.jsx)("input",{type:"number",min:1,max:N.stock,value:p,onChange:e=>j(Math.max(1,Math.min(N.stock,parseInt(e.target.value)||1))),className:"w-16 text-center border rounded py-1"}),(0,r.jsx)(d.z,{variant:"default",size:"sm",onClick:()=>j(Math.min(N.stock,p+1)),disabled:p>=N.stock,children:(0,r.jsx)(i.Z,{className:"w-4 h-4"})})]})]}),(0,r.jsxs)(d.z,{variant:"primary",fullWidth:!0,size:"lg",disabled:0===N.stock,onClick:y,className:"mb-6",children:[(0,r.jsx)(l.Z,{className:"w-5 h-5 mr-2"}),N.stock>0?"加入购物车":"缺货"]}),(0,r.jsxs)("div",{className:"border-t pt-6",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"商品描述"}),(0,r.jsx)("p",{className:"text-gray-600 whitespace-pre-wrap",children:N.description})]})]})]})})}}},function(e){e.O(0,[482,61,971,117,744],function(){return e(e.s=2274)}),_N_E=e.O()}]);